import{d as k,r as u,o as _,c as a,a as p,b as e,t as v,e as b,F as C,f as h,w as P,g as x,v as y,h as M,i as g,j as n}from"./index-C8dmJ1dN.js";const A={key:0,class:"alert alert-error mb-4"},L={class:"mb-8 flex justify-between items-center"},V=["disabled"],D={key:0,class:"loading loading-spinner loading-sm"},S={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},$={key:1,class:"text-center py-16"},j={key:2,class:"text-center py-16"},B={key:3,class:"grid gap-4"},N={class:"card-body"},T={class:"flex justify-between items-start"},U={class:"card-title text-primary"},q={class:"text-base-content/70"},F={class:"badge badge-secondary mt-2"},H={class:"card-actions"},E=["onClick","disabled"],R={class:"text-sm text-base-content/50 mt-2"},z={key:4,class:"modal modal-open"},G={class:"modal-box"},Y={class:"form-control"},I={class:"form-control mt-4"},J={class:"form-control mt-4"},K={class:"modal-action"},O=["disabled"],Q=["disabled"],W={key:0,class:"loading loading-spinner loading-sm"},te=k({__name:"ProxiesView",setup(X){const m=u([]),d=u(!1),o=u(!1),r=u(""),i=u({domain:"",target_url:"",ssl_mode:"auto"}),c=async()=>{o.value=!0,r.value="";const l=await g.getProxies();l.error?r.value=l.error:l.data&&(m.value=l.data.proxies),o.value=!1},f=async()=>{if(!i.value.domain||!i.value.target_url){r.value="Domain and target URL are required";return}o.value=!0,r.value="";const l=await g.createProxy(i.value);l.error?r.value=l.error:(d.value=!1,i.value={domain:"",target_url:"",ssl_mode:"auto"},await c()),o.value=!1},w=async l=>{if(!confirm(`Are you sure you want to delete proxy for ${l.domain}?`))return;o.value=!0,r.value="";const t=await g.deleteProxy(l.id);t.error?r.value=t.error:await c(),o.value=!1};return _(()=>{c()}),(l,t)=>(n(),a("div",null,[r.value?(n(),a("div",A,[t[7]||(t[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,v(r.value),1),e("button",{class:"btn btn-sm",onClick:t[0]||(t[0]=s=>r.value="")},"âœ•")])):p("",!0),e("div",L,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-3xl font-bold text-base-content"},"Proxy Management"),e("p",{class:"text-base-content/70 mt-2"},"Manage your Caddy proxy configurations")],-1)),e("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=s=>d.value=!0),disabled:o.value},[o.value?(n(),a("span",D)):(n(),a("svg",S,t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)]))),t[9]||(t[9]=b(" Add Proxy ",-1))],8,V)]),o.value&&m.value.length===0?(n(),a("div",$,t[11]||(t[11]=[e("span",{class:"loading loading-spinner loading-lg"},null,-1),e("p",{class:"text-base-content/70 mt-4"},"Loading proxies...",-1)]))):m.value.length===0?(n(),a("div",j,[t[12]||(t[12]=e("div",{class:"mockup-code bg-base-200 mx-auto max-w-lg"},[e("pre",{"data-prefix":"$"},[e("code",null,"caddy reverse-proxy --from example.com --to localhost:3000")])],-1)),t[13]||(t[13]=e("h3",{class:"text-xl font-semibold mt-6 text-base-content"},"No proxies configured",-1)),t[14]||(t[14]=e("p",{class:"text-base-content/70 mt-2"},"Get started by adding your first proxy configuration",-1)),e("button",{class:"btn btn-primary mt-4",onClick:t[2]||(t[2]=s=>d.value=!0)}," Add Your First Proxy ")])):(n(),a("div",B,[(n(!0),a(C,null,h(m.value,s=>(n(),a("div",{key:s.id,class:"card bg-base-100 shadow-xl"},[e("div",N,[e("div",T,[e("div",null,[e("h2",U,v(s.domain),1),e("p",q,v(s.target_url),1),e("div",F,v(s.ssl_mode),1)]),e("div",H,[e("button",{class:"btn btn-error btn-sm",onClick:Z=>w(s),disabled:o.value},t[15]||(t[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),b(" Delete ",-1)]),8,E)])]),e("div",R," Created: "+v(new Date(s.created_at).toLocaleString()),1)])]))),128))])),d.value?(n(),a("div",z,[e("div",G,[t[21]||(t[21]=e("h3",{class:"font-bold text-lg text-base-content"},"Add New Proxy",-1)),e("form",{onSubmit:P(f,["prevent"]),class:"py-4"},[e("div",Y,[t[16]||(t[16]=e("label",{class:"label"},[e("span",{class:"label-text"},"Domain/Subdomain")],-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>i.value.domain=s),type:"text",placeholder:"example.com",class:"input input-bordered",required:""},null,512),[[y,i.value.domain]])]),e("div",I,[t[17]||(t[17]=e("label",{class:"label"},[e("span",{class:"label-text"},"Target URL")],-1)),x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>i.value.target_url=s),type:"text",placeholder:"http://localhost:3000",class:"input input-bordered",required:""},null,512),[[y,i.value.target_url]])]),e("div",J,[t[19]||(t[19]=e("label",{class:"label"},[e("span",{class:"label-text"},"SSL Certificate")],-1)),x(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>i.value.ssl_mode=s),class:"select select-bordered"},t[18]||(t[18]=[e("option",{value:"auto"},"Auto (Let's Encrypt)",-1),e("option",{value:"custom"},"Custom Certificate",-1),e("option",{value:"none"},"None (HTTP only)",-1)]),512),[[M,i.value.ssl_mode]])])],32),e("div",K,[e("button",{class:"btn",onClick:t[6]||(t[6]=s=>d.value=!1),disabled:o.value},"Cancel",8,O),e("button",{class:"btn btn-primary",onClick:f,disabled:o.value},[o.value?(n(),a("span",W)):p("",!0),t[20]||(t[20]=b(" Add Proxy ",-1))],8,Q)])])])):p("",!0)]))}});export{te as default};
