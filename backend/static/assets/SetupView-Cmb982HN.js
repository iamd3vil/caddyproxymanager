import{d as x,u as g,r as f,a as h,c as n,o as l,b as s,w as C,e as c,f as w,v as b,n as p,t as m,g as S,h as V}from"./index-CRIMLnw7.js";const q={class:"min-h-screen flex items-center justify-center bg-base-200"},B={class:"card w-full max-w-sm bg-base-100 shadow-xl"},U={class:"card-body"},M={class:"form-control"},A=["disabled"],j={key:0,class:"label"},z={class:"label-text-alt text-error"},D={class:"form-control"},E=["disabled"],F={key:0,class:"label"},N={class:"label-text-alt text-error"},R={key:1,class:"label"},T={class:"form-control"},W=["disabled"],$={key:0,class:"label"},G={class:"label-text-alt text-error"},H={key:0,class:"alert alert-error"},I={class:"form-control mt-6"},J=["disabled"],K={key:0},L=x({__name:"SetupForm",setup(y){const v=g(),t=f(!1),d=f(""),u=f(""),o=h({username:"",password:""}),a=h({username:"",password:"",confirmPassword:""}),_=()=>{a.username="",a.password="",a.confirmPassword="",d.value=""},P=()=>{_();let r=!0;return o.username.trim()||(a.username="Username is required",r=!1),o.password.trim()?o.password.length<6&&(a.password="Password must be at least 6 characters",r=!1):(a.password="Password is required",r=!1),u.value.trim()?o.password!==u.value&&(a.confirmPassword="Passwords do not match",r=!1):(a.confirmPassword="Please confirm your password",r=!1),r},k=async()=>{if(P()){t.value=!0,_();try{const r=await S.setup(o);r.success?v.push("/dashboard"):d.value=r.message||"Setup failed"}catch(r){d.value="An error occurred during setup",console.error("Setup error:",r)}finally{t.value=!1}}};return(r,e)=>(l(),n("div",q,[s("div",B,[s("div",U,[e[8]||(e[8]=s("div",{class:"text-center mb-6"},[s("h1",{class:"text-2xl font-bold"},"Welcome to Caddy Proxy Manager"),s("p",{class:"text-base-content/60"},"Create your admin account")],-1)),s("form",{onSubmit:C(k,["prevent"]),class:"space-y-4"},[s("div",M,[e[3]||(e[3]=s("label",{class:"label"},[s("span",{class:"label-text"},"Username")],-1)),w(s("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>o.username=i),type:"text",class:p(["input input-bordered w-full",{"input-error":a.username}]),placeholder:"Choose a username",required:"",disabled:t.value},null,10,A),[[b,o.username]]),a.username?(l(),n("div",j,[s("span",z,m(a.username),1)])):c("",!0)]),s("div",D,[e[5]||(e[5]=s("label",{class:"label"},[s("span",{class:"label-text"},"Password")],-1)),w(s("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>o.password=i),type:"password",class:p(["input input-bordered w-full",{"input-error":a.password}]),placeholder:"Choose a secure password",required:"",disabled:t.value},null,10,E),[[b,o.password]]),a.password?(l(),n("div",F,[s("span",N,m(a.password),1)])):(l(),n("div",R,e[4]||(e[4]=[s("span",{class:"label-text-alt"},"At least 6 characters",-1)])))]),s("div",T,[e[6]||(e[6]=s("label",{class:"label"},[s("span",{class:"label-text"},"Confirm Password")],-1)),w(s("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>u.value=i),type:"password",class:p(["input input-bordered w-full",{"input-error":a.confirmPassword}]),placeholder:"Confirm your password",required:"",disabled:t.value},null,10,W),[[b,u.value]]),a.confirmPassword?(l(),n("div",$,[s("span",G,m(a.confirmPassword),1)])):c("",!0)]),d.value?(l(),n("div",H,[e[7]||(e[7]=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s("span",null,m(d.value),1)])):c("",!0),s("div",I,[s("button",{type:"submit",class:p(["btn btn-primary w-full",{loading:t.value}]),disabled:t.value},[t.value?c("",!0):(l(),n("span",K,"Create Account"))],10,J)])],32)])])]))}}),Q=x({__name:"SetupView",setup(y){return(v,t)=>(l(),V(L))}});export{Q as default};
